version: "3"

services:
  ocr-api:
    build: .
    container_name: ocr_api_server
    ports:
      - "8000:8000"
    volumes:
      # 1. Code stays in workspace
      - ./:/app
      
      # 2. MODELS MOVE TO TMP (108GB Drive)
      # We map the host's /tmp/ocr_models to the container's cache
      - /tmp/ocr_models:/root/.cache
    
    environment:
      - PYTHONUNBUFFERED=1
      # Tell HuggingFace to use this path specifically
      - HF_HOME=/root/.cache/huggingface
    restart: always